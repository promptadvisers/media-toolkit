<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Toolkit</title>
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <h1>Media Toolkit</h1>
            <p class="subtitle">Your local media processing Swiss knife</p>
        </header>

        <!-- Main Menu - 5 Feature Cards -->
        <main id="main-menu" class="card-grid">
            <button class="feature-card" data-feature="video-split">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="23 7 16 12 23 17 23 7"></polygon>
                        <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                        <line x1="8" y1="5" x2="8" y2="19"></line>
                    </svg>
                </div>
                <h2>Video Splitting</h2>
                <p>Split videos into equal parts</p>
            </button>

            <button class="feature-card" data-feature="video-compress">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="4 14 10 14 10 20"></polyline>
                        <polyline points="20 10 14 10 14 4"></polyline>
                        <line x1="14" y1="10" x2="21" y2="3"></line>
                        <line x1="3" y1="21" x2="10" y2="14"></line>
                    </svg>
                </div>
                <h2>Video Compression</h2>
                <p>Reduce file size with quality control</p>
            </button>

            <button class="feature-card" data-feature="image-convert">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <circle cx="8.5" cy="8.5" r="1.5"></circle>
                        <polyline points="21 15 16 10 5 21"></polyline>
                    </svg>
                </div>
                <h2>Image Conversion</h2>
                <p>Convert between PNG, JPG, WEBP & more</p>
            </button>

            <button class="feature-card" data-feature="pdf-tools">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="12" y1="18" x2="12" y2="12"></line>
                        <line x1="9" y1="15" x2="15" y2="15"></line>
                    </svg>
                </div>
                <h2>PDF Tools</h2>
                <p>Merge or split PDF documents</p>
            </button>

            <button class="feature-card" data-feature="audio-extract">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 18V5l12-2v13"></path>
                        <circle cx="6" cy="18" r="3"></circle>
                        <circle cx="18" cy="16" r="3"></circle>
                    </svg>
                </div>
                <h2>Audio Extraction</h2>
                <p>Extract audio from video files</p>
            </button>

            <button class="feature-card" data-feature="ai-image">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                    </svg>
                </div>
                <h2>AI Image Editor</h2>
                <p>Generate & edit images with AI</p>
            </button>

            <button class="feature-card" data-feature="image-blur">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10" opacity="0.3"></circle>
                        <circle cx="12" cy="12" r="6" opacity="0.5"></circle>
                        <circle cx="12" cy="12" r="2"></circle>
                    </svg>
                </div>
                <h2>Image Blur</h2>
                <p>Blur sensitive areas in images</p>
            </button>
        </main>

        <!-- Feature Panels (hidden by default) -->

        <!-- Video Split Panel -->
        <section id="video-split-panel" class="feature-panel hidden">
            <div class="panel-header">
                <button class="back-btn" onclick="showMainMenu()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 19 5 12 12 5"></polyline>
                    </svg>
                    Back
                </button>
                <h2>Video Splitting</h2>
            </div>
            <div class="panel-content">
                <!-- Drop Zone (for getting filename) -->
                <div id="video-drop-zone" class="drop-zone" style="padding: 24px; cursor: pointer;">
                    <div class="drop-zone-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="23 7 16 12 23 17 23 7"></polygon>
                            <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                        </svg>
                    </div>
                    <p class="drop-zone-text" style="margin: 8px 0 4px;">Drop video here to get filename</p>
                    <p class="drop-zone-hint" style="font-size: 11px;">Then paste the full path below</p>
                </div>

                <!-- File Path Input -->
                <div class="form-group" style="margin-top: 12px;">
                    <label class="form-label" for="video-path-input">
                        File path: <span style="font-weight: normal; opacity: 0.6; font-size: 11px;">(Right-click file in Finder ‚Üí Hold Option ‚Üí Copy as Pathname)</span>
                    </label>
                    <div style="display: flex; gap: 8px;">
                        <input type="text" id="video-path-input" class="form-input" placeholder="/Users/you/Downloads/video.mp4" style="font-family: monospace; flex: 1; font-size: 13px;">
                        <button id="video-load-btn" class="btn btn-primary" type="button">Load</button>
                    </div>
                </div>

                <!-- Preview Container -->
                <div id="video-preview-container" class="preview-container hidden">
                    <div class="video-preview-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="23 7 16 12 23 17 23 7"></polygon>
                            <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                        </svg>
                    </div>
                    <div class="preview-info">
                        <p><strong>File:</strong> <span id="video-file-name">-</span></p>
                        <p><strong>Size:</strong> <span id="video-file-size">-</span></p>
                        <p><strong>Duration:</strong> <span id="video-duration">-</span></p>
                        <p><strong>Resolution:</strong> <span id="video-resolution">-</span></p>
                    </div>
                </div>

                <!-- Parts Selection -->
                <div class="form-group">
                    <label class="form-label" for="video-parts-input">Number of parts:</label>
                    <div class="parts-input-wrapper">
                        <input type="number" id="video-parts-input" class="form-input parts-input" min="2" max="20" value="2">
                        <span class="parts-input-hint">2-20 parts</span>
                    </div>
                </div>

                <!-- Parts Preview -->
                <div id="video-parts-preview" class="parts-preview">
                    <p class="parts-preview-placeholder">Upload a video to see split preview</p>
                </div>

                <!-- Progress Container -->
                <div id="video-progress-container" class="video-progress-container hidden">
                    <div class="progress-bar-wrapper">
                        <div id="video-progress-bar" class="progress-bar-fill"></div>
                    </div>
                    <p id="video-progress-text" class="progress-text-label">Processing...</p>
                </div>

                <!-- Split Button -->
                <button id="split-btn" class="btn btn-primary btn-block" disabled>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="23 7 16 12 23 17 23 7"></polygon>
                        <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                        <line x1="8" y1="5" x2="8" y2="19"></line>
                    </svg>
                    Split Video
                </button>

                <!-- Result Container -->
                <div id="video-result-container" class="result-container hidden">
                    <div class="result-success">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                        </svg>
                        <span>Video split successfully!</span>
                    </div>
                    <div id="video-result-info" class="result-info" style="max-height: 200px; overflow-y: auto; font-size: 12px;"></div>
                </div>
            </div>
        </section>

        <!-- Video Compression Panel -->
        <section id="video-compress-panel" class="feature-panel hidden">
            <div class="panel-header">
                <button class="back-btn" onclick="showMainMenu()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 19 5 12 12 5"></polyline>
                    </svg>
                    Back
                </button>
                <h2>Video Compression</h2>
            </div>
            <div class="panel-content">
                <!-- Drop Zone -->
                <div id="compress-drop-zone" class="drop-zone" style="padding: 24px; cursor: pointer;">
                    <div class="drop-zone-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="4 14 10 14 10 20"></polyline>
                            <polyline points="20 10 14 10 14 4"></polyline>
                            <line x1="14" y1="10" x2="21" y2="3"></line>
                            <line x1="3" y1="21" x2="10" y2="14"></line>
                        </svg>
                    </div>
                    <p class="drop-zone-text" style="margin: 8px 0 4px;">Drop video here to get filename</p>
                    <p class="drop-zone-hint" style="font-size: 11px;">Then paste the full path below</p>
                </div>

                <!-- File Path Input -->
                <div class="form-group" style="margin-top: 12px;">
                    <label class="form-label" for="compress-path-input">
                        File path: <span style="font-weight: normal; opacity: 0.6; font-size: 11px;">(Right-click file in Finder > Hold Option > Copy as Pathname)</span>
                    </label>
                    <div style="display: flex; gap: 8px;">
                        <input type="text" id="compress-path-input" class="form-input" placeholder="/Users/you/Downloads/video.mp4" style="font-family: monospace; flex: 1; font-size: 13px;">
                        <button id="compress-load-btn" class="btn btn-primary" type="button">Load</button>
                    </div>
                </div>

                <!-- Preview Container -->
                <div id="compress-preview-container" class="preview-container hidden">
                    <div class="video-preview-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="23 7 16 12 23 17 23 7"></polygon>
                            <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                        </svg>
                    </div>
                    <div class="preview-info">
                        <p><strong>File:</strong> <span id="compress-file-name">-</span></p>
                        <p><strong>Size:</strong> <span id="compress-file-size">-</span></p>
                        <p><strong>Duration:</strong> <span id="compress-duration">-</span></p>
                        <p><strong>Resolution:</strong> <span id="compress-resolution">-</span></p>
                    </div>
                </div>

                <!-- Compression Mode Tabs -->
                <div class="compress-tabs">
                    <button class="compress-tab active" data-mode="target-size">Target Size</button>
                    <button class="compress-tab" data-mode="quality">Quality Preset</button>
                    <button class="compress-tab" data-mode="resolution">Resolution</button>
                </div>

                <!-- Target Size Panel -->
                <div id="compress-target-size-panel" class="compress-tab-panel">
                    <div class="form-group">
                        <label class="form-label" for="target-size-input">Target file size (MB):</label>
                        <input type="number" id="target-size-input" class="form-input" value="900" min="10" max="10000" style="width: 150px;">
                        <p class="form-hint">For files under 1GB, use 900MB. Uses two-pass encoding for accuracy.</p>
                    </div>
                </div>

                <!-- Quality Panel -->
                <div id="compress-quality-panel" class="compress-tab-panel hidden">
                    <div class="form-group">
                        <label class="form-label">Quality preset:</label>
                        <div class="compress-buttons">
                            <button class="compress-opt-btn quality-btn" data-quality="low">Low (Smallest)</button>
                            <button class="compress-opt-btn quality-btn active" data-quality="medium">Medium (Balanced)</button>
                            <button class="compress-opt-btn quality-btn" data-quality="high">High (Best Quality)</button>
                        </div>
                        <p class="form-hint">Low: CRF 28, Medium: CRF 23, High: CRF 18</p>
                    </div>
                </div>

                <!-- Resolution Panel -->
                <div id="compress-resolution-panel" class="compress-tab-panel hidden">
                    <div class="form-group">
                        <label class="form-label">Target resolution:</label>
                        <div class="compress-buttons">
                            <button class="compress-opt-btn resolution-btn" data-resolution="1080p">1080p</button>
                            <button class="compress-opt-btn resolution-btn active" data-resolution="720p">720p</button>
                            <button class="compress-opt-btn resolution-btn" data-resolution="480p">480p</button>
                            <button class="compress-opt-btn resolution-btn" data-resolution="360p">360p</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Quality:</label>
                        <div class="compress-buttons">
                            <button class="compress-opt-btn res-quality-btn" data-quality="low">Low</button>
                            <button class="compress-opt-btn res-quality-btn active" data-quality="medium">Medium</button>
                            <button class="compress-opt-btn res-quality-btn" data-quality="high">High</button>
                        </div>
                    </div>
                </div>

                <!-- Estimate Preview -->
                <div id="compress-estimate" class="compress-estimate hidden">
                    <p><strong>Estimated output:</strong> <span id="estimate-size">-</span></p>
                    <p><strong>Size reduction:</strong> <span id="estimate-reduction">-</span></p>
                </div>

                <!-- Progress Container -->
                <div id="compress-progress-container" class="video-progress-container hidden">
                    <div class="progress-bar-wrapper">
                        <div id="compress-progress-bar" class="progress-bar-fill"></div>
                    </div>
                    <p id="compress-progress-text" class="progress-text-label">Compressing...</p>
                </div>

                <!-- Compress Button -->
                <button id="compress-btn" class="btn btn-primary btn-block" disabled>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="4 14 10 14 10 20"></polyline>
                        <polyline points="20 10 14 10 14 4"></polyline>
                        <line x1="14" y1="10" x2="21" y2="3"></line>
                        <line x1="3" y1="21" x2="10" y2="14"></line>
                    </svg>
                    Compress Video
                </button>

                <!-- Result Container -->
                <div id="compress-result-container" class="result-container hidden">
                    <div class="result-success">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                        </svg>
                        <span>Video compressed successfully!</span>
                    </div>
                    <div id="compress-result-info" class="result-info" style="max-height: 200px; overflow-y: auto; font-size: 12px;"></div>
                </div>
            </div>
        </section>

        <!-- Image Convert Panel -->
        <section id="image-convert-panel" class="feature-panel hidden">
            <div class="panel-header">
                <button class="back-btn" onclick="showMainMenu()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 19 5 12 12 5"></polyline>
                    </svg>
                    Back
                </button>
                <h2>Image Conversion</h2>
            </div>
            <div class="panel-content">
                <!-- Drop Zone -->
                <div id="image-drop-zone" class="drop-zone">
                    <input type="file" id="image-file-input" accept=".png,.jpg,.jpeg,.webp,.gif,.bmp,.tiff,.heic,.heif" multiple hidden>
                    <div class="drop-zone-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <circle cx="8.5" cy="8.5" r="1.5"></circle>
                            <polyline points="21 15 16 10 5 21"></polyline>
                        </svg>
                    </div>
                    <p class="drop-zone-text">Drag & drop images here</p>
                    <p class="drop-zone-hint">or click to browse (PNG, JPG, WEBP, HEIC, GIF, BMP, TIFF) - Select multiple files for bulk conversion</p>
                </div>

                <!-- Preview Container (single file) -->
                <div id="image-preview-container" class="preview-container hidden">
                    <div class="preview-image-wrapper">
                        <img id="image-preview" alt="Preview">
                    </div>
                    <div class="preview-info">
                        <p><strong>File:</strong> <span id="image-file-name">-</span></p>
                        <p><strong>Size:</strong> <span id="image-file-size">-</span></p>
                        <p><strong>Dimensions:</strong> <span id="image-file-dimensions">-</span></p>
                    </div>
                </div>

                <!-- File List Container (bulk upload) -->
                <div id="image-file-list" class="image-file-list hidden"></div>

                <!-- Format Selection -->
                <div class="form-group">
                    <label class="form-label">Convert to:</label>
                    <div class="format-buttons">
                        <button class="format-btn" data-format="png">PNG</button>
                        <button class="format-btn active" data-format="jpg">JPG</button>
                        <button class="format-btn" data-format="webp">WEBP</button>
                        <button class="format-btn" data-format="gif">GIF</button>
                        <button class="format-btn" data-format="bmp">BMP</button>
                        <button class="format-btn" data-format="tiff">TIFF</button>
                    </div>
                </div>

                <!-- Quality Slider -->
                <div id="quality-container" class="form-group">
                    <label class="form-label">Quality: <span id="quality-value">85%</span></label>
                    <input type="range" id="quality-slider" class="quality-slider" min="1" max="100" value="85">
                </div>

                <!-- Convert Button -->
                <button id="convert-btn" class="btn btn-primary btn-block" disabled>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="16 16 12 12 8 16"></polyline>
                        <line x1="12" y1="12" x2="12" y2="21"></line>
                        <path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"></path>
                    </svg>
                    Convert Image
                </button>

                <!-- Result Container -->
                <div id="image-result-container" class="result-container hidden">
                    <div class="result-success">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                        </svg>
                        <span>Converted successfully!</span>
                    </div>
                    <p id="image-result-info" class="result-info"></p>
                    <button id="image-download-btn" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        Download Converted Image
                    </button>
                </div>
            </div>
        </section>

        <!-- PDF Tools Panel -->
        <section id="pdf-tools-panel" class="feature-panel hidden">
            <div class="panel-header">
                <button class="back-btn" onclick="showMainMenu()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 19 5 12 12 5"></polyline>
                    </svg>
                    Back
                </button>
                <h2>PDF Tools</h2>
            </div>
            <div class="panel-content">
                <!-- Tabs -->
                <div class="pdf-tabs">
                    <button id="pdf-merge-tab" class="pdf-tab active">Merge PDFs</button>
                    <button id="pdf-split-tab" class="pdf-tab">Split PDF</button>
                </div>

                <!-- Merge Panel -->
                <div id="pdf-merge-panel" class="pdf-tab-panel">
                    <div id="pdf-merge-drop-zone" class="drop-zone">
                        <input type="file" id="pdf-merge-file-input" accept=".pdf" multiple hidden>
                        <div class="drop-zone-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                                <line x1="12" y1="18" x2="12" y2="12"></line>
                                <line x1="9" y1="15" x2="15" y2="15"></line>
                            </svg>
                        </div>
                        <p class="drop-zone-text">Drag & drop PDF files here</p>
                        <p class="drop-zone-hint">or click to browse (select multiple files)</p>
                    </div>

                    <div id="pdf-merge-file-list" class="pdf-file-list hidden"></div>

                    <button id="pdf-merge-btn" class="btn btn-primary btn-block" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"></path>
                        </svg>
                        Merge PDFs
                    </button>

                    <div id="pdf-merge-result-container" class="result-container hidden">
                        <div class="result-success">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                <polyline points="22 4 12 14.01 9 11.01"></polyline>
                            </svg>
                            <span>PDFs merged successfully!</span>
                        </div>
                        <button id="pdf-merge-download-btn" class="btn btn-primary">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            Download Merged PDF
                        </button>
                    </div>
                </div>

                <!-- Split Panel -->
                <div id="pdf-split-panel" class="pdf-tab-panel hidden">
                    <div id="pdf-split-drop-zone" class="drop-zone">
                        <input type="file" id="pdf-split-file-input" accept=".pdf" hidden>
                        <div class="drop-zone-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="9" y1="3" x2="9" y2="21"></line>
                            </svg>
                        </div>
                        <p class="drop-zone-text">Drag & drop a PDF file here</p>
                        <p class="drop-zone-hint">or click to browse</p>
                    </div>

                    <div id="pdf-split-preview" class="pdf-split-preview hidden">
                        <div class="pdf-split-info">
                            <span id="pdf-split-file-name">document.pdf</span>
                            <span id="pdf-split-page-count">0 pages</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Split mode:</label>
                        <div class="split-mode-options">
                            <label class="radio-option">
                                <input type="radio" name="split-mode" id="split-mode-all" value="all" checked>
                                <span>Split all pages (download as ZIP)</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="split-mode" id="split-mode-range" value="range">
                                <span>Extract specific pages</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group hidden">
                        <label class="form-label" for="split-pages-input">Pages to extract:</label>
                        <input type="text" id="split-pages-input" class="form-input" placeholder="e.g., 1,3,5-7">
                        <p class="form-hint">Enter page numbers separated by commas. Use dashes for ranges (e.g., 1-5)</p>
                    </div>

                    <button id="pdf-split-btn" class="btn btn-primary btn-block" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="9" y1="3" x2="9" y2="21"></line>
                        </svg>
                        Split PDF
                    </button>

                    <div id="pdf-split-result-container" class="result-container hidden">
                        <div class="result-success">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                <polyline points="22 4 12 14.01 9 11.01"></polyline>
                            </svg>
                            <span>PDF split successfully!</span>
                        </div>
                        <button id="pdf-split-download-btn" class="btn btn-primary">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            Download
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Audio Extract Panel -->
        <section id="audio-extract-panel" class="feature-panel hidden">
            <div class="panel-header">
                <button class="back-btn" onclick="showMainMenu()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 19 5 12 12 5"></polyline>
                    </svg>
                    Back
                </button>
                <h2>Audio Extraction</h2>
            </div>
            <div class="panel-content">
                <!-- Drop Zone -->
                <div id="audio-drop-zone" class="drop-zone">
                    <input type="file" id="audio-file-input" accept=".mp4,.mkv,.avi,.mov,.webm,.flv,.wmv,.m4v,.mpeg,.mpg,.3gp" hidden>
                    <div class="drop-zone-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="23 7 16 12 23 17 23 7"></polygon>
                            <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                        </svg>
                    </div>
                    <p class="drop-zone-text">Drag & drop a video file here</p>
                    <p class="drop-zone-hint">or click to browse (MP4, MKV, AVI, MOV, WEBM, etc.)</p>
                </div>

                <!-- Preview Container -->
                <div id="audio-preview-container" class="preview-container hidden">
                    <div class="audio-preview-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="23 7 16 12 23 17 23 7"></polygon>
                            <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                        </svg>
                    </div>
                    <div class="preview-info">
                        <p><strong>File:</strong> <span id="audio-file-name">-</span></p>
                        <p><strong>Size:</strong> <span id="audio-file-size">-</span></p>
                        <p><strong>Duration:</strong> <span id="audio-duration">-</span></p>
                        <p><strong>Audio:</strong> <span id="audio-info">-</span></p>
                    </div>
                </div>

                <!-- Format Selection -->
                <div class="form-group">
                    <label class="form-label">Output Format:</label>
                    <div class="format-buttons">
                        <button class="audio-format-btn active" data-format="mp3">MP3</button>
                        <button class="audio-format-btn" data-format="aac">AAC</button>
                        <button class="audio-format-btn" data-format="wav">WAV</button>
                        <button class="audio-format-btn" data-format="flac">FLAC</button>
                        <button class="audio-format-btn" data-format="ogg">OGG</button>
                    </div>
                </div>

                <!-- Bitrate Selection -->
                <div id="audio-bitrate-container" class="form-group">
                    <label class="form-label" for="audio-bitrate-select">Bitrate:</label>
                    <select id="audio-bitrate-select" class="form-select">
                        <option value="64">64 kbps (Low)</option>
                        <option value="128">128 kbps (Standard)</option>
                        <option value="192" selected>192 kbps (Good)</option>
                        <option value="256">256 kbps (High)</option>
                        <option value="320">320 kbps (Best)</option>
                    </select>
                </div>

                <!-- Extract Button -->
                <button id="extract-btn" class="btn btn-primary btn-block" disabled>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 18V5l12-2v13"></path>
                        <circle cx="6" cy="18" r="3"></circle>
                        <circle cx="18" cy="16" r="3"></circle>
                    </svg>
                    Extract Audio
                </button>

                <!-- Result Container -->
                <div id="audio-result-container" class="result-container hidden">
                    <div class="result-success">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                        </svg>
                        <span>Audio extracted successfully!</span>
                    </div>
                    <p id="audio-result-info" class="result-info"></p>
                    <button id="audio-download-btn" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        Download Audio
                    </button>
                </div>
            </div>
        </section>

        <!-- AI Image Panel -->
        <section id="ai-image-panel" class="feature-panel hidden">
            <div class="panel-header">
                <button class="back-btn" onclick="showMainMenu()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 19 5 12 12 5"></polyline>
                    </svg>
                    Back
                </button>
                <h2>AI Image Editor</h2>
            </div>
            <div class="panel-content">
                <!-- Mode Tabs -->
                <div class="ai-mode-tabs">
                    <button class="ai-mode-tab active" data-mode="generate">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                        </svg>
                        Generate
                    </button>
                    <button class="ai-mode-tab" data-mode="edit">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                        </svg>
                        Edit
                    </button>
                </div>

                <!-- Generate Panel -->
                <div id="ai-generate-panel" class="ai-tab-panel">
                    <!-- Preset Styles -->
                    <div class="form-group">
                        <label class="form-label">Style Presets:</label>
                        <div class="ai-preset-grid">
                            <button class="ai-preset-btn" data-mode="generate" data-preset="Photorealistic">
                                <span class="ai-preset-icon">üì∑</span>
                                <span>Photorealistic</span>
                            </button>
                            <button class="ai-preset-btn" data-mode="generate" data-preset="Digital Art">
                                <span class="ai-preset-icon">üé®</span>
                                <span>Digital Art</span>
                            </button>
                            <button class="ai-preset-btn" data-mode="generate" data-preset="Watercolor">
                                <span class="ai-preset-icon">üñåÔ∏è</span>
                                <span>Watercolor</span>
                            </button>
                            <button class="ai-preset-btn" data-mode="generate" data-preset="Minimalist">
                                <span class="ai-preset-icon">‚óªÔ∏è</span>
                                <span>Minimalist</span>
                            </button>
                            <button class="ai-preset-btn" data-mode="generate" data-preset="3D Render">
                                <span class="ai-preset-icon">üßä</span>
                                <span>3D Render</span>
                            </button>
                            <button class="ai-preset-btn" data-mode="generate" data-preset="Anime Style">
                                <span class="ai-preset-icon">‚ú®</span>
                                <span>Anime</span>
                            </button>
                        </div>
                    </div>

                    <!-- Prompt Input -->
                    <div class="form-group">
                        <label class="form-label" for="ai-prompt-input">Describe your image:</label>
                        <textarea
                            id="ai-prompt-input"
                            class="form-textarea"
                            placeholder="A majestic dragon flying over a medieval castle at sunset, cinematic lighting, highly detailed..."
                            rows="4"
                        ></textarea>
                    </div>

                    <!-- Generate Button -->
                    <button id="ai-generate-btn" class="btn btn-primary btn-block">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                        </svg>
                        Generate Image
                    </button>
                </div>

                <!-- Edit Panel -->
                <div id="ai-edit-panel" class="ai-tab-panel hidden">
                    <!-- Drop Zone -->
                    <div id="ai-edit-drop-zone" class="drop-zone">
                        <input type="file" id="ai-edit-file-input" accept=".png,.jpg,.jpeg,.webp,.gif,.heic,.heif" hidden>
                        <div class="drop-zone-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                <polyline points="21 15 16 10 5 21"></polyline>
                            </svg>
                        </div>
                        <p class="drop-zone-text">Drop an image to edit</p>
                        <p class="drop-zone-hint">or click to browse (PNG, JPG, WEBP, GIF)</p>
                    </div>

                    <!-- Edit Preview -->
                    <div id="ai-edit-preview-container" class="ai-edit-preview hidden">
                        <img id="ai-edit-preview" alt="Preview">
                    </div>

                    <!-- Edit Presets -->
                    <div class="form-group">
                        <label class="form-label">Quick Actions:</label>
                        <div class="ai-preset-grid">
                            <button class="ai-preset-btn" data-mode="edit" data-preset="Remove Background">
                                <span class="ai-preset-icon">‚úÇÔ∏è</span>
                                <span>Remove BG</span>
                            </button>
                            <button class="ai-preset-btn" data-mode="edit" data-preset="Change Style">
                                <span class="ai-preset-icon">üé≠</span>
                                <span>Style Transfer</span>
                            </button>
                            <button class="ai-preset-btn" data-mode="edit" data-preset="Add Elements">
                                <span class="ai-preset-icon">‚ûï</span>
                                <span>Add Element</span>
                            </button>
                            <button class="ai-preset-btn" data-mode="edit" data-preset="Remove Object">
                                <span class="ai-preset-icon">üßπ</span>
                                <span>Remove Object</span>
                            </button>
                            <button class="ai-preset-btn" data-mode="edit" data-preset="Enhance Quality">
                                <span class="ai-preset-icon">‚ú®</span>
                                <span>Enhance</span>
                            </button>
                            <button class="ai-preset-btn" data-mode="edit" data-preset="Color Correction">
                                <span class="ai-preset-icon">üåà</span>
                                <span>Color Fix</span>
                            </button>
                        </div>
                    </div>

                    <!-- Edit Prompt -->
                    <div class="form-group">
                        <label class="form-label" for="ai-edit-prompt-input">Edit instructions:</label>
                        <textarea
                            id="ai-edit-prompt-input"
                            class="form-textarea"
                            placeholder="Describe how you want to edit the image..."
                            rows="3"
                        ></textarea>
                    </div>

                    <!-- Edit Button -->
                    <button id="ai-edit-btn" class="btn btn-primary btn-block" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                        </svg>
                        Edit Image
                    </button>
                </div>

                <!-- Result Container -->
                <div id="ai-result-container" class="ai-result-container hidden">
                    <div class="ai-result-header">
                        <div class="result-success">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                <polyline points="22 4 12 14.01 9 11.01"></polyline>
                            </svg>
                            <span>Image ready!</span>
                        </div>
                    </div>
                    <div class="ai-result-image-wrapper">
                        <img id="ai-result-image" alt="Generated image">
                    </div>
                    <button id="ai-download-btn" class="btn btn-primary btn-block">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        Download Image
                    </button>
                </div>
            </div>
        </section>

        <!-- Image Blur Panel -->
        <section id="image-blur-panel" class="feature-panel hidden">
            <div class="panel-header">
                <button class="back-btn" onclick="showMainMenu()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 19 5 12 12 5"></polyline>
                    </svg>
                    Back
                </button>
                <h2>Image Blur</h2>
            </div>
            <div class="panel-content">
                <!-- Drop Zone -->
                <div id="blur-drop-zone" class="drop-zone">
                    <input type="file" id="blur-file-input" accept=".png,.jpg,.jpeg,.webp,.gif,.bmp" hidden>
                    <div class="drop-zone-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <circle cx="8.5" cy="8.5" r="1.5"></circle>
                            <polyline points="21 15 16 10 5 21"></polyline>
                        </svg>
                    </div>
                    <p class="drop-zone-text">Drag & drop an image here</p>
                    <p class="drop-zone-hint">or click to browse, or paste from clipboard (Cmd/Ctrl+V)</p>
                </div>

                <!-- Blur Controls -->
                <div id="blur-controls" class="blur-controls hidden">
                    <div class="blur-toolbar">
                        <div class="blur-toolbar-group">
                            <label class="form-label">Shape:</label>
                            <div class="format-buttons">
                                <button class="format-btn blur-shape-btn active" data-shape="rectangle">Rectangle</button>
                                <button class="format-btn blur-shape-btn" data-shape="ellipse">Ellipse</button>
                            </div>
                        </div>

                        <div class="blur-toolbar-group">
                            <label class="form-label">Blur Intensity: <span id="blur-intensity-value">15</span>px</label>
                            <input type="range" id="blur-intensity-slider" class="quality-slider" min="5" max="50" value="15">
                        </div>

                        <div class="blur-toolbar-group blur-actions">
                            <button id="blur-undo-btn" class="btn btn-secondary" disabled>
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="1 4 1 10 7 10"></polyline>
                                    <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
                                </svg>
                                Undo
                            </button>
                            <span id="blur-count" class="blur-count">0 blurs</span>
                        </div>
                    </div>

                    <!-- Canvas Container -->
                    <div class="blur-canvas-container">
                        <div class="blur-canvas-wrapper">
                            <canvas id="blur-main-canvas"></canvas>
                            <canvas id="blur-selection-canvas"></canvas>
                        </div>
                    </div>

                    <p class="blur-instructions">Click and drag on the image to create blur regions</p>

                    <!-- Download Button -->
                    <button id="blur-download-btn" class="btn btn-primary btn-block">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        Download Blurred Image
                    </button>
                </div>
            </div>
        </section>
    </div>

    <script src="/static/js/main.js"></script>
    <script src="/static/js/image.js"></script>
    <script src="/static/js/pdf.js"></script>
    <script src="/static/js/audio.js"></script>
    <script src="/static/js/video.js"></script>
    <script src="/static/js/compress.js"></script>
    <script src="/static/js/ai-image.js"></script>
    <script src="/static/js/blur.js"></script>
</body>
</html>
